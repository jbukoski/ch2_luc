losses_2000
losses <- losses_2000 %>%
left_join(dstrct_df, by = c("district" = "ADM2_ID")) %>%
select(ADM2_ID = district, ADM2_EN, ADM1_EN, aquaculture, agriculture,
mangrove, other_forest, mudflats, mines, abandoned, salt_farms, urban)
losses_total <- losses %>%
summarize(
ADM2_ID = 9999,
ADM2_EN = "Total",
ADM1_EN = "all",
aquaculture = sum(aquaculture, na.rm = T),
agriculture = sum(agriculture, na.rm = T),
mangrove = sum(mangrove, na.rm = T),
other_forest = sum(other_forest, na.rm = T),
mudflats = sum(mudflats, na.rm = T),
mines = sum(mines, na.rm = T),
abandoned = sum(abandoned, na.rm = T),
salt_farms = sum(salt_farms, na.rm = T),
urban = sum(urban, na.rm = T)
)
dstrct_losses_2000 <- bind_rows(losses, losses_total)
dstrct_losses_2000
dstrct_losses_2000 %>% View
losses <- losses_2000 %>%
left_join(dstrct_df, by = c("district" = "ADM2_ID")) %>%
select(ADM2_ID = district, ADM2_EN, ADM1_EN, aquaculture, agriculture,
mangrove, other_forest, mudflats, mines, abandoned, salt_farms, urban)
losses_total <- losses %>%
summarize(
ADM2_ID = 9999,
ADM2_EN = "Total",
ADM1_EN = "all",
aquaculture = sum(aquaculture, na.rm = T),
agriculture = sum(agriculture, na.rm = T),
mangrove = sum(mangrove, na.rm = T),
other_forest = sum(other_forest, na.rm = T),
mudflats = sum(mudflats, na.rm = T),
mines = sum(mines, na.rm = T),
abandoned = sum(abandoned, na.rm = T),
salt_farms = sum(salt_farms, na.rm = T),
urban = sum(urban, na.rm = T)
)
losses_total
losses_2000
sum(losses_2000$aquaculture)
sum(losses_2000$aquaculture, na.rm = T)
sum(losses_2000$mangrove, na.rm = T)
plot(crop_dat)
plot(crop_dat)
plot(crop_areaRast)
?zonal
shp <- dstrcts[1, ]
crop_dat <- crop(mg2000, shp)
crop_areaRast <- crop(areaRaster, shp)
zonalSums <- as.data.frame(zonal(crop_areaRast, crop_dat, fun = "sum"))
vctr <- loss_codes %>%
left_join(zonalSums, by = c("code" = "zone")) %>%
pull(sum)
vctr
shp
plot(shp)
plot(crop_dat)
clip_dat <- clip(crop_dat, shp)
?clip
?raster::clip
zonalSums
crop_dat
crop_areaRast
?zonal
3369 / 1252
7263 / 3040
plot(crop_dat)
plot(shp, add = T)
plot(crop_dat)
plot(shp, add = T, fill = FALSE)
plot(crop_dat)
plot(shp$geometry, add = T)
clip_dat <- mask(crop_dat, shp)
plot(clip_dat)
zonalSums <- as.data.frame(zonal(crop_areaRast, clip_dat, fun = "sum"))
zonalSums
loss_codes <- data.frame(district = NA, code = c(1, 2, 3, 4, 5, 6, 7, 9, 10))
losses_2000 <- data.frame(district = NA, aquaculture = NA, agriculture = NA, mangrove = NA,
other_forest = NA, mudflats = NA, mines = NA, abandoned = NA,
salt_farms = NA, urban = NA)
areaRaster <- area(mg2000)
for(i in 1:nrow(dstrcts)) {
shp <- dstrcts[i, ]
crop_dat <- crop(mg2000, shp)
clip_dat <- mask(crop_dat, shp)
crop_areaRast <- crop(areaRaster, shp)
zonalSums <- as.data.frame(zonal(crop_areaRast, clip_dat, fun = "sum"))
vctr <- loss_codes %>%
left_join(zonalSums, by = c("code" = "zone")) %>%
pull(sum)
losses_2000[i, ] <- c(i, vctr)
}
losses_2000[, 2:10] <- losses_2000[, 2:10] * 100
losses_2000
losses <- losses_2000 %>%
left_join(dstrct_df, by = c("district" = "ADM2_ID")) %>%
select(ADM2_ID = district, ADM2_EN, ADM1_EN, aquaculture, agriculture,
mangrove, other_forest, mudflats, mines, abandoned, salt_farms, urban)
losses_total <- losses %>%
summarize(
ADM2_ID = 9999,
ADM2_EN = "Total",
ADM1_EN = "all",
aquaculture = sum(aquaculture, na.rm = T),
agriculture = sum(agriculture, na.rm = T),
mangrove = sum(mangrove, na.rm = T),
other_forest = sum(other_forest, na.rm = T),
mudflats = sum(mudflats, na.rm = T),
mines = sum(mines, na.rm = T),
abandoned = sum(abandoned, na.rm = T),
salt_farms = sum(salt_farms, na.rm = T),
urban = sum(urban, na.rm = T)
)
dstrct_losses_2000 <- bind_rows(losses, losses_total)
dstrct_losses_2000 %>% View
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000_ha, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban, geometry)
plot(dstrcts_loss_2000_sf['aquaculture'])
sum(dstrcts_loss_2000_sf$aquaculture)
sum(dstrcts_loss_2000_sf$aquaculture, na.rm = T)
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban, geometry)
plot(dstrcts_loss_2000_sf['aquaculture'])
sum(dstrcts_loss_2000_sf$aquaculture)
sum(dstrcts_loss_2000_sf$aquaculture, na.rm = T)
sum(dstrcts_loss_2000_sf$agriculture)
sum(dstrcts_loss_2000_sf$agriculture, na.rm = T)
plot(dstrcts_loss_2000_sf['agriculture'])
plot(dstrcts_loss_2000_sf['aquaculture'])
plot(dstrcts_loss_2000_sf['agriculture'])
dstrcts_loss_2000_sf
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
mutate(total = sum(aquaculture:urban))
dstrct_losses_2000_sf
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
mutate(total = sum(., -ADM1_EN, -ADM2_ID, -ADM2_EN))
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
mutate(total = sum(.[, 4:6]))
dstrct_losses_2000
rowsum(dstrct_losses_2000[, 4:12])
?rowsum
sum(dstrct_losses_2000[, 4:12])
sum(dstrct_losses_2000[, 4:12], na.rm = T)
dstrct_losses_2000 %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest,
mudflats, mines, abandoned, salt_farms, urban))
dstrct_losses_2000 %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest,
mudflats, mines, abandoned, salt_farms, urban, na.rm = T))
dstrct_losses_2000 <- bind_rows(losses, losses_total) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest,
mudflats, mines, abandoned, salt_farms, urban, na.rm = T))
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban,
total, geometry)
dstrcts_loss_2000_sf
dat <- dstrcts_loss_2000_sf %>%
mutate(mg_retained = mangrove / total * 100)
dat
plot(dat['mg_retained'])
dat <- dstrcts_loss_2000_sf %>%
mutate(perc_mgrv_retained = mangrove / total * 100,
perc_cvrtd_aqua = aquaculture / total * 100,
perc_cvrtd_agri = agriculture / total * 100)
plot(dat['perc_mgrc_retained', 'perc_cvrtd_aqua'])
plot(dat['perc_cvrtd_aqua'])
plot(dat['perc_cvrtd_agri'])
dat <- dstrcts_loss_2000_sf %>%
mutate(perc_mgrv_retained = mangrove / total * 100,
perc_cvrtd_aqua = aquaculture / total * 100,
perc_cvrtd_agri = agriculture / total * 100,
perc_cvrtd_salt = salt_farms / total * 100)
plot(dat['perc_cvrtd_salt'])
dat <- dstrcts_loss_2000_sf %>%
mutate(perc_mgrv_retained = mangrove / total * 100,
perc_cvrtd_aqua = aquaculture / total * 100,
perc_cvrtd_agri = agriculture / total * 100,
perc_cvrtd_salt = salt_farms / total * 100,
perc_cvrtd_urban = urban / total * 100)
plot(dat['perc_cvrtd_urban'])
plot(dat['perc_cvrtd_urban' * 100])
dstrct_losses_2000 <- bind_rows(losses, losses_total) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest,
mudflats, mines, abandoned, salt_farms, urban, na.rm = T),
perc_mgrv_retained = mangrove / total * 100,
perc_cvrtd_aqua = aquaculture / total * 100,
perc_cvrtd_agri = agriculture / total * 100,
perc_cvrtd_salt = salt_farms / total * 100,
perc_cvrtd_urban = urban / total * 100)
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban,
total, geometry)
dstrcts_loss_2000_sf
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban,
total, perc* geometry)
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban,
total, perc*, geometry)
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN"))
dstrcts_loss_2000_sf
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
dplyr::select(., geometry)
dstrcts_loss_2000_sf
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
dplyr::select(*, geometry)
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban,
total, perc_mgrv_retained, perc_cvrtd_aqua, perc_cvrtd_agri,
perc_cvrtd_salt, perc_cvrtd_urban, geometry)
dstrcts_loss_2000_sf
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban,
total, perc_mgrv_retained, perc_cvrtd_aqua, perc_cvrtd_agri,
perc_cvrtd_salt, perc_cvrtd_urban, geometry)
dstrcts_loss_2000_sf
st_write(dstrcts_loss_2000_sf, dsn = paste0(proc_dir, "shapefiles/dstrct_losses_2000"), driver = "ESRI Shapefile")
dstrcts_loss_2000_sf <- dstrcts %>%
left_join(dstrct_losses_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban,
total, geometry)
st_write(dstrcts_loss_2000_sf, dsn = paste0(proc_dir, "shapefiles/dstrct_losses_2000"), layer = "dstrct_losses_2000", driver = "ESRI Shapefile")
loss_codes_00 <- data.frame(district = NA, code = c(1, 2, 3, 4, 5, 6, 7, 9, 10))
loss_codes_14 <- data.frame(district = NA, code = c(1, 2, 3, 4, 5, 7, 8, 9, 10, 11))
losses_2000 <- data.frame(district = NA, aquaculture = NA, agriculture = NA, mangrove = NA,
other_forest = NA, mudflats = NA, mines = NA, abandoned = NA,
salt_farms = NA, urban = NA)
losses_2014 <- data.frame(district = NA, aquaculture = NA, agriculture = NA, mangrove = NA,
other_forest = NA, mudflats = NA, abandoned = NA, sand = NA,
salt_farms = NA, urban = NA, water = NA)
for(i in 1:1) {
shp <- dstrcts[i, ]
cropDat_00 <- crop(mg2000, shp)
clipDat_00 <- mask(cropDat_00, shp)
cropDat_14 <- crop(mg2014, shp)
clipDat_14 <- mask(cropDat_14, shp)
crop_areaRast <- crop(areaRaster, shp)
zonalSums_00 <- as.data.frame(zonal(crop_areaRast, clipDat_00, fun = "sum"))
zonalSums_14 <- as.data.frame(zonal(crop_areaRast, clipDat_14, fun = "sum"))
vctr_00 <- loss_codes_00 %>%
left_join(zonalSums_00, by = c("code" = "zone")) %>%
pull(sum)
vctr_14 <- loss_codes_14 %>%
left_join(zonalSums_14, by = c("code" = "zone")) %>%
pull(sum)
losses_2000[i, ] <- c(i, vctr * 100)  # Multiply by 100 to convert from km^2 to ha
losses_2014[i, ] <- c(i, vctr_14 * 100)
}
losses_2000
losses_2014
dstrcts[i, ]
for(i in 1:1)) {
shp <- dstrcts[i, ]
cropDat_00 <- crop(mg2000, shp)
clipDat_00 <- mask(cropDat_00, shp)
cropDat_14 <- crop(mg2014, shp)
clipDat_14 <- mask(cropDat_14, shp)
crop_areaRast <- crop(areaRaster, shp)
zonalSums_00 <- as.data.frame(zonal(crop_areaRast, clipDat_00, fun = "sum"))
zonalSums_14 <- as.data.frame(zonal(crop_areaRast, clipDat_14, fun = "sum"))
vctr_00 <- loss_codes_00 %>%
left_join(zonalSums_00, by = c("code" = "zone")) %>%
pull(sum)
vctr_14 <- loss_codes_14 %>%
left_join(zonalSums_14, by = c("code" = "zone")) %>%
pull(sum)
losses_2000[i, ] <- c(i, vctr_00 * 100)  # Multiply by 100 to convert from km^2 to ha
losses_2014[i, ] <- c(i, vctr_14 * 100)
}
for(i in 1:1) {
shp <- dstrcts[i, ]
cropDat_00 <- crop(mg2000, shp)
clipDat_00 <- mask(cropDat_00, shp)
cropDat_14 <- crop(mg2014, shp)
clipDat_14 <- mask(cropDat_14, shp)
crop_areaRast <- crop(areaRaster, shp)
zonalSums_00 <- as.data.frame(zonal(crop_areaRast, clipDat_00, fun = "sum"))
zonalSums_14 <- as.data.frame(zonal(crop_areaRast, clipDat_14, fun = "sum"))
vctr_00 <- loss_codes_00 %>%
left_join(zonalSums_00, by = c("code" = "zone")) %>%
pull(sum)
vctr_14 <- loss_codes_14 %>%
left_join(zonalSums_14, by = c("code" = "zone")) %>%
pull(sum)
losses_2000[i, ] <- c(i, vctr_00 * 100)  # Multiply by 100 to convert from km^2 to ha
losses_2014[i, ] <- c(i, vctr_14 * 100)
}
losses_2000
losses_2014
sum(losses_2000[1, ])
sum(losses_2000[1, ], na.rm = T)
sum(losses_2014[1, ], na.rm = T)
losses_00 <- losses_2000 %>%
left_join(dstrct_df, by = c("district" = "ADM2_ID")) %>%
select(ADM2_ID = district, ADM2_EN, ADM1_EN, aquaculture, agriculture,
mangrove, other_forest, mudflats, mines, abandoned, salt_farms, urban)
losses_14 <- losses_2014 %>%
left_join(dstrct_df, by = c("district" = "ADM2_ID")) %>%
select(ADM2_ID = district, ADM2_EN, ADM1_EN, aquaculture, agriculture,
mangrove, other_forest, mudflats, abandoned, sand, salt_farms, urban,
water)
losses_00
losses_14
losses_ttl_14 <- losses_14 %>%
summarize(ADM2_ID = 9999, ADM2_EN = "Total", ADM1_EN = "all",
aquaculture = sum(aquaculture, na.rm = T),
agriculture = sum(agriculture, na.rm = T),
mangrove = sum(mangrove, na.rm = T),
other_forest = sum(other_forest, na.rm = T),
mudflats = sum(mudflats, na.rm = T),
abandoned = sum(abandoned, na.rm = T),
sand = sum(sand, na.rm = T),
salt_farms = sum(salt_farms, na.rm = T),
urban = sum(urban, na.rm = T),
water = sum(water, na.rm = T))
for(i in 1:nrow(dstrcts)) {
shp <- dstrcts[i, ]
cropDat_00 <- crop(mg2000, shp)
clipDat_00 <- mask(cropDat_00, shp)
cropDat_14 <- crop(mg2014, shp)
clipDat_14 <- mask(cropDat_14, shp)
crop_areaRast <- crop(areaRaster, shp)
zonalSums_00 <- as.data.frame(zonal(crop_areaRast, clipDat_00, fun = "sum"))
zonalSums_14 <- as.data.frame(zonal(crop_areaRast, clipDat_14, fun = "sum"))
vctr_00 <- loss_codes_00 %>%
left_join(zonalSums_00, by = c("code" = "zone")) %>%
pull(sum)
vctr_14 <- loss_codes_14 %>%
left_join(zonalSums_14, by = c("code" = "zone")) %>%
pull(sum)
losses_2000[i, ] <- c(i, vctr_00 * 100)  # Multiply by 100 to convert from km^2 to ha
losses_2014[i, ] <- c(i, vctr_14 * 100)
}
losses_00 <- losses_2000 %>%
left_join(dstrct_df, by = c("district" = "ADM2_ID")) %>%
select(ADM2_ID = district, ADM2_EN, ADM1_EN, aquaculture, agriculture,
mangrove, other_forest, mudflats, mines, abandoned, salt_farms, urban)
losses_14 <- losses_2014 %>%
left_join(dstrct_df, by = c("district" = "ADM2_ID")) %>%
select(ADM2_ID = district, ADM2_EN, ADM1_EN, aquaculture, agriculture,
mangrove, other_forest, mudflats, abandoned, sand, salt_farms, urban,
water)
losses_ttl_00 <- losses_00 %>%
summarize(ADM2_ID = 9999, ADM2_EN = "Total", ADM1_EN = "all",
aquaculture = sum(aquaculture, na.rm = T),
agriculture = sum(agriculture, na.rm = T),
mangrove = sum(mangrove, na.rm = T),
other_forest = sum(other_forest, na.rm = T),
mudflats = sum(mudflats, na.rm = T),
mines = sum(mines, na.rm = T),
abandoned = sum(abandoned, na.rm = T),
salt_farms = sum(salt_farms, na.rm = T),
urban = sum(urban, na.rm = T))
losses_ttl_14 <- losses_14 %>%
summarize(ADM2_ID = 9999, ADM2_EN = "Total", ADM1_EN = "all",
aquaculture = sum(aquaculture, na.rm = T),
agriculture = sum(agriculture, na.rm = T),
mangrove = sum(mangrove, na.rm = T),
other_forest = sum(other_forest, na.rm = T),
mudflats = sum(mudflats, na.rm = T),
abandoned = sum(abandoned, na.rm = T),
sand = sum(sand, na.rm = T),
salt_farms = sum(salt_farms, na.rm = T),
urban = sum(urban, na.rm = T),
water = sum(water, na.rm = T))
dstrct_ttls_2000 <- bind_rows(losses_00, losses_ttl_00)
dstrct_ttls_2014 <- bind_rows(losses_14, losses_ttl_14)
dstrct_ttls_2000_sf <- dstrcts %>%
left_join(dstrct_ttls_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats, mines, abandoned, salt_farms, urban, na.rm = T)) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove, other_forest, mudflats, mines, abandoned, salt_farms, urban, total, geometry)
dstrct_ttls_2014_sf <- dstrcts %>%
left_join(dstrct_ttls_2014, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats, mines, abandoned, salt_farms, urban, na.rm = T)) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove, other_forest, mudflats, mines, abandoned, salt_farms, urban, total, geometry)
dstrct_ttls_2014_sf <- dstrcts %>%
left_join(dstrct_ttls_2014, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats,
abandoned, sand, salt_farms, urban, water, na.rm = T)) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, abandoned, sand, salt_farms, urban, water, total, geometry)
plot(dstrct_ttls_2000_sf['aquaculture'])
dstrct_ttls_2000_sf
dstrct_ttls_2000_sf <- dstrcts %>%
left_join(dstrct_ttls_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats,
mines, abandoned, salt_farms, urban, na.rm = T)) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban, total, geometry)
dstrct_ttls_2000_sf
dstrcts <- read_sf(paste0(proc_dir, "shapefiles/districts_mg")) %>%
mutate(ADM2_ID = row_number()) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN)
dstrcts
dstrct_ttls_2000_sf <- dstrcts %>%
left_join(dstrct_ttls_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats,
mines, abandoned, salt_farms, urban, na.rm = T)) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban, total, geometry)
dstrct_ttls_2014_sf <- dstrcts %>%
left_join(dstrct_ttls_2014, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats,
abandoned, sand, salt_farms, urban, water, na.rm = T)) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, abandoned, sand, salt_farms, urban, water, total, geometry)
dstrct_ttls_2000_sf
class(dstrct_ttls_2000_sf)
class(dstrcts)
dstrct_ttls_2000_sf <- dstrcts %>%
left_join(dstrct_ttls_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
#rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats,
mines, abandoned, salt_farms, urban, na.rm = T)) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban, total, geometry)
dstrct_ttls_2000_sf
dstrct_ttls_2000_sf <- dstrcts %>%
left_join(dstrct_ttls_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats,
mines, abandoned, salt_farms, urban, na.rm = T)) %>%
ungroup() %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban, total, geometry)
dstrct_ttls_2000_sf
dstrct_ttls_2000 <- bind_rows(losses_00, losses_ttl_00) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats,
mines, abandoned, salt_farms, urban, na.rm = T)) %>%
ungroup() %>%
dstrct_ttls_2014 <- bind_rows(losses_14, losses_ttl_14) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats,
abandoned, sand, salt_farms, urban, water, na.rm = T)) %>%
ungroup()
dstrct_ttls_2000 <- bind_rows(losses_00, losses_ttl_00) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats,
mines, abandoned, salt_farms, urban, na.rm = T)) %>%
ungroup()
dstrct_ttls_2000
dstrct_ttls_2014
dstrct_ttls_2014 <- bind_rows(losses_14, losses_ttl_14) %>%
rowwise() %>%
mutate(total = sum(aquaculture, agriculture, mangrove, other_forest, mudflats,
abandoned, sand, salt_farms, urban, water, na.rm = T)) %>%
ungroup()
dstrct_ttls_2014
dstrct_ttls_2000_sf <- dstrcts %>%
left_join(dstrct_ttls_2000, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, mines, abandoned, salt_farms, urban, total, geometry)
dstrct_ttls_2014_sf <- dstrcts %>%
left_join(dstrct_ttls_2014, by = c("ADM1_EN", "ADM2_ID", "ADM2_EN")) %>%
arrange(ADM1_EN, ADM2_EN) %>%
dplyr::select(ADM1_EN, ADM2_ID, ADM2_EN, aquaculture, agriculture, mangrove,
other_forest, mudflats, abandoned, sand, salt_farms, urban, water, total, geometry)
plot(dstrct_ttls_2000_sf['aquaculture'])
plot(dstrct_ttls_2014_sf['aquaculture'])
st_write(dstrct_ttls_2000_sf, dsn = paste0(proc_dir, "shapefiles/dstrct_ttls_2000"), layer = "dstrct_ttls_2000", driver = "ESRI Shapefile")
st_write(dstrct_ttls_2014_sf, dsn = paste0(proc_dir, "shapefiles/dstrct_ttls_2014"), layer = "dstrct_ttls_2014", driver = "ESRI Shapefile")
rm(list = ls())
