st_join(select(mg2000, ADM2_EN, total), by = c("ADM2_EN"))
dstrct_c
select(mg2000, ADM2_EN, total)
mg2000_df <- st_read(paste0(in_dir, "shapefiles/dstrct_ttls_2000")) %>%
st_geometry(NULL)
mg2000_df
mg2000_df <- st_geometry(st_read(paste0(in_dir, "shapefiles/dstrct_ttls_2000")), NULL)
mg2000_df
st_geometry(mg2000_df) <- NULL
mg2000_df <- st_read(paste0(in_dir, "shapefiles/dstrct_ttls_2000"))
st_geometry(mg2000_df) <- NULL
mg2000_df
dstrct_c <- st_read(paste0(in_dir, "shapefiles/dstrcts_c/")) %>%
mutate(ECO_AVG = AGB_AVG + SOC_AVG,
ECO_SD = sqrt(AGB_SD^2 + SOC_SD^2)) %>%
st_join(select(mg2000, ADM2_EN, total), by = c("ADM2_EN"))
dstrct_c <- st_read(paste0(in_dir, "shapefiles/dstrcts_c/")) %>%
mutate(ECO_AVG = AGB_AVG + SOC_AVG,
ECO_SD = sqrt(AGB_SD^2 + SOC_SD^2)) %>%
left_join(select(mg2000_df, ADM2_EN, total), by = c("ADM2_EN"))
dstrct_c
buildLeg <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", ) +
guides(fill = guide_legend(title = "Carbon Stocks (Mg ha^-1)"))
buildLeg
buildLeg <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", ) +
guides(fill = guide_legend(title = "Megatonnes (1e6 Mg)"))
eco <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22") +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("Ecosystem") +
theme(legend.position = "NONE")
agb <- base +
geom_sf(data = dstrct_c, aes(fill = AGB_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22") +
annotate(geom = "text", label = "b",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("Aboveground Biomass") +
theme(legend.position = "NONE")
soc <- base +
geom_sf(data = dstrct_c, aes(fill = SOC_AVG / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", limits = c(0, 800)) +
annotate(geom = "text", label = "c",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("Soil Organic Carbon") +
theme(legend.position = "NONE")
soc
soc <- base +
geom_sf(data = dstrct_c, aes(fill = SOC_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", limits = c(0, 800)) +
annotate(geom = "text", label = "c",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("Soil Organic Carbon") +
theme(legend.position = "NONE")
soc <- base +
geom_sf(data = dstrct_c, aes(fill = SOC_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22") +
annotate(geom = "text", label = "c",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("Soil Organic Carbon") +
theme(legend.position = "NONE")
soc
agb
buildLeg <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", ) +
guides(fill = guide_legend(title = "Megatonnes (1e6 Mg)"))
eco <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22") +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("Ecosystem") +
theme(legend.position = "NONE")
agb <- base +
geom_sf(data = dstrct_c, aes(fill = AGB_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22") +
annotate(geom = "text", label = "b",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("Aboveground Biomass") +
theme(legend.position = "NONE")
soc <- base +
geom_sf(data = dstrct_c, aes(fill = SOC_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22") +
annotate(geom = "text", label = "c",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("Soil Organic Carbon") +
theme(legend.position = "NONE")
leg <- get_legend(buildLeg)
f2 <- grid.arrange(eco, agb, soc, leg, ncol = 3, nrow = 2,
layout_matrix = rbind(c(1, 2, 3), c(4, 4, 4)),
heights = c(1, 0.1))
f2
eco
area <- base +
geom_sf(data = mg2014, aes(geometry = geometry, fill = total / 1000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22") +
guides(fill = guide_legend(title = "Mangrove Area (10e3 ha)")) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black")
area
f2 <- grid.arrange(area, eco, agb, soc, ncol = 2, nrow = 2)
f2
dstrct_c
area <- base +
geom_sf(data = mg2014, aes(geometry = geometry, fill = total / 1000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22") +
guides(fill = guide_legend(title = "Mangrove Area (10e3 ha)")) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black")
eco <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22") +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black")
agb <- base +
geom_sf(data = dstrct_c, aes(fill = AGB_AVG), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", limit = c(0, 800)) +
annotate(geom = "text", label = "b",  x = 103.25, y = 13.5, size = 8, color = "black")
soc <- base +
geom_sf(data = dstrct_c, aes(fill = SOC_AVG), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22",  limit = c(0, 800)) +
annotate(geom = "text", label = "c",  x = 103.25, y = 13.5, size = 8, color = "black")
f2 <- grid.arrange(area, eco, agb, soc, ncol = 2, nrow = 2)
f2
eco <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", limit = c(0, 800)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black")
agb <- base +
geom_sf(data = dstrct_c, aes(fill = AGB_AVG), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", limit = c(0, 800)) +
annotate(geom = "text", label = "b",  x = 103.25, y = 13.5, size = 8, color = "black")
soc <- base +
geom_sf(data = dstrct_c, aes(fill = SOC_AVG), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22",  limit = c(0, 800)) +
annotate(geom = "text", label = "c",  x = 103.25, y = 13.5, size = 8, color = "black")
f2 <- grid.arrange(area, eco, agb, soc, ncol = 2, nrow = 2)
f2
eco <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22") +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black")
eco
eco <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, Before 1960")
eco
stocks1960 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, Before 1960")
stocks2000 <- base +
geom_sf(data = dstrct_c, aes(fill = mangrov * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, 2000")
f2 <- grid.arrange(stocks1960, stocks2000, ncol = 2, nrow = 1)
dstrct_c
dstrct_c <- st_read(paste0(in_dir, "shapefiles/dstrcts_c/")) %>%
mutate(ECO_AVG = AGB_AVG + SOC_AVG,
ECO_SD = sqrt(AGB_SD^2 + SOC_SD^2)) %>%
left_join(select(mg2000_df, ADM2_EN, mangrov, total), by = c("ADM2_EN"))
stocks2000 <- base +
geom_sf(data = dstrct_c, aes(fill = mangrov * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, 2000")
f2 <- grid.arrange(stocks1960, stocks2000, ncol = 2, nrow = 1)
f2
dstrct_c <- st_read(paste0(in_dir, "shapefiles/dstrcts_c/")) %>%
mutate(ECO_AVG = AGB_AVG + SOC_AVG,
ECO_SD = sqrt(AGB_SD^2 + SOC_SD^2)) %>%
left_join(select(mg2000_df, ADM2_EN, mangrov_00 = mangrov, total_00 = total), by = c("ADM2_EN"))
dstrct_c
dstrct_c <- st_read(paste0(in_dir, "shapefiles/dstrcts_c/")) %>%
mutate(ECO_AVG = AGB_AVG + SOC_AVG,
ECO_SD = sqrt(AGB_SD^2 + SOC_SD^2)) %>%
left_join(select(mg2000_df, ADM2_EN, mangrov_00 = mangrov, total_00 = total), by = c("ADM2_EN")) %>%
left_join(select(mg2014_df, ADM2_EN, mangrov_14 = mangrov, total_14 = total), by = c("ADM2_EN"))
mg2014_df <- st_read(paste0(in_dir, "shapefiles/dstrct_ttls_2000"))
st_geometry(mg2014_df) <- NULL
dstrct_c <- st_read(paste0(in_dir, "shapefiles/dstrcts_c/")) %>%
mutate(ECO_AVG = AGB_AVG + SOC_AVG,
ECO_SD = sqrt(AGB_SD^2 + SOC_SD^2)) %>%
left_join(select(mg2000_df, ADM2_EN, mangrov_00 = mangrov, total_00 = total), by = c("ADM2_EN")) %>%
left_join(select(mg2014_df, ADM2_EN, mangrov_14 = mangrov, total_14 = total), by = c("ADM2_EN"))
stocks1960 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, Before 1960")
stocks2000 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * mangrov_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, 2000")
stocks2014 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * mangrov_14 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, 2014")
f2 <- grid.arrange(stocks1960, stocks2000, stocks2014, nrow = 1)
stocks1960 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, Before 1960")
stocks2000 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * mangrov_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, 2000")
stocks2014 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * mangrov_14 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, 2014")
f2 <- grid.arrange(stocks1960, stocks2000, stocks2014, nrow = 1)
f2
stocks1960 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
guides(fill = guide_legend(title = "Megatonnes C (1e6 Mg C)")) +
ggtitle("District level mangrove C, Before 1960") +
theme(legened.position = "NONE")
stocks1960 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
guides(fill = guide_legend(title = "Megatonnes C (1e6 Mg C)")) +
ggtitle("District level mangrove C, Before 1960") +
theme(legend.position = "NONE")
leg <- get_legend(stocks1960)
leg
theme(legend.position = "NONE")
stocks1960 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
guides(fill = guide_legend(title = "Megatonnes C (1e6 Mg C)")) +
ggtitle("District level mangrove C, Before 1960")
leg <- get_legend(stocks1960)
stocks1960 <- stocks1960
stocks1960 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
guides(fill = guide_legend(title = "Megatonnes C (1e6 Mg C)")) +
ggtitle("District level mangrove C, Before 1960")
leg <- get_legend(stocks1960)
stocks1960 <- stocks1960 +
theme(legend.position = "NONE")
stocks2000 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * mangrov_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, 2000") +
theme(legend.position = "NONE")
stocks2014 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * mangrov_14 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, 2014") +
theme(legened.position = "NONE")
?grid.arrange
f2 <- grid.arrange(stocks1960, stocks2000, stocks2014, leg, ncol = 3, nrow = 2,
layout_matrix = c(1, 2, 3, 4, 4, 4),
heights = c(1, 0.1))
f2 <- grid.arrange(stocks1960, stocks2000, stocks2014, leg, ncol = 3, nrow = 2,
layout_matrix = c(c(1, 2, 3), c(4, 4, 4)), heights = c(1, 0.1))
f2 <- grid.arrange(stocks1960, stocks2000, stocks2014, leg, ncol = 3, nrow = 2,
layout_matrix = rbind(c(1, 2, 3), c(4, 4, 4)), heights = c(1, 0.1))
f2
stocks2014 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * mangrov_14 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("District level mangrove C, 2014") +
theme(legend.position = "NONE")
f2 <- grid.arrange(stocks1960, stocks2000, stocks2014, leg, ncol = 3, nrow = 2,
layout_matrix = rbind(c(1, 2, 3), c(4, 4, 4)), heights = c(1, 0.1))
f2
stocks1960 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
#annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
guides(fill = guide_legend(title = "Megatonnes C (1e6 Mg C)")) +
ggtitle("pre-1960")
leg <- get_legend(stocks1960)
stocks1960 <- stocks1960 +
theme(legend.position = "NONE")
stocks2000 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * mangrov_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
#annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("2000") +
theme(legend.position = "NONE")
stocks2014 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * mangrov_14 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
#annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("2014") +
theme(legend.position = "NONE")
f2 <- grid.arrange(stocks1960, stocks2000, stocks2014, leg, ncol = 3, nrow = 2,
layout_matrix = rbind(c(1, 2, 3), c(4, 4, 4)), heights = c(1, 0.1))
f2
stocks1960 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * total_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
#annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
guides(fill = guide_legend(title = "Megatonnes C (1e6 Mg C)")) +
ggtitle("Pre-1960")
leg <- get_legend(stocks1960)
stocks1960 <- stocks1960 +
theme(legend.position = "NONE")
stocks2000 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * mangrov_00 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
#annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("2000") +
theme(legend.position = "NONE")
stocks2014 <- base +
geom_sf(data = dstrct_c, aes(fill = ECO_AVG * mangrov_14 / 1000000), size = 0.2) +
scale_fill_gradient(low = "#ffffff", high = "#228B22", breaks = c(0, 2, 4, 6, 8, 10)) +
#annotate(geom = "text", label = "a",  x = 103.25, y = 13.5, size = 8, color = "black") +
ggtitle("2014") +
theme(legend.position = "NONE")
f2 <- grid.arrange(stocks1960, stocks2000, stocks2014, leg, ncol = 3, nrow = 2,
layout_matrix = rbind(c(1, 2, 3), c(4, 4, 4)), heights = c(1, 0.1))
ggsave("./figs/f2_cStocks.jpg", f2, width = 12, height = 5.75, units = c("in"), device = "jpeg")
print("Running Step 2. land use and land cover change analysis...")
library(raster)
library(rgdal)
library(sf)
library(sp)
library(spsurvey)
library(tidyverse)
raw_dir <- "./data/raw/"
proc_dir <- "./data/processed/"
table_dir <- "./tables/"
mg2000 <- raster(paste0(proc_dir, "rasters/mg2000.tif"))
mg2014 <- raster(paste0(proc_dir, "rasters/mg2014.tif"))
ct <- crosstab(mg2000, mg2014, useNA = T)
ct_df <- as.data.frame.matrix(ct)
ct_df
print("Running Step 2. land use and land cover change analysis...")
library(raster)
library(rgdal)
library(sf)
library(sp)
library(spsurvey)
library(tidyverse)
raw_dir <- "./data/raw/"
proc_dir <- "./data/processed/"
table_dir <- "./tables/"
mg2000 <- raster(paste0(proc_dir, "rasters/mg2000.tif"))
mg2014 <- raster(paste0(proc_dir, "rasters/mg2014.tif"))
ct <- crosstab(mg2000, mg2014, useNA = T)
ct_df <- as.data.frame.matrix(ct)
ct <- crosstab(mg2000, mg2014, useNA = T)
ct_df <- as.data.frame.matrix(ct)
ct_df
ct_df * 937 / 10000
ct_df * 937 / 10000
ct_df * 937 / 10000 / 1000
rowSums(ct_df * 937 / 10000 / 1000)
rowSums(ct_df * 937 / 10000 / 1000)
ct_df_ha$ttl <- rowsums(ct_df_ha)
ct_df_ha$ttl <- rowSums(ct_df_ha)
ct_df_ha <- ct_df * 937 / 10000 / 1000
ct_df_ha$ttl <- rowSums(ct_df_ha)
ct_df_ha
ct_df_ha <- rbind(ct_df_ha, colSums(ct_df_ha))
ct_df_ha
75.1 + 39.6 + 252.5 + 9.4 + 1.6 + 3.3 + 6.9 + 2.8 + 9.5 + 22.7
70.7 + 54.5 + 245.3 + 9.8 + 7.1 + 1.5 + 0.2 + 25.3 + 16.6 + 28.8 + 0.4
75.1 + 39.6 + 252.5 + 9.4 + 15.9 + 0.3 + 6.9 + 28.3 + 9.5 + 22.7
c(75.1 + 39.6 + 252.5 + 9.4 + 15.9 + 0.3 + 6.9 + 28.3 + 9.5 + 22.7)
c(75.1, 39.6, 252.5, 9.4, 15.9, 0.3, 6.9, 28.3, 9.5, 22.7)
c(75.1, 39.6, 252.5, 9.4, 15.9, 0.3, 6.9, 28.3, 9.5, 22.7) / 460.2
c(75.1, 39.6, 252.5, 9.4, 15.9, 0.3, 6.9, 28.3, 9.5, 22.7) / 460.2 * 100
c(70.7, 54.5, 245.3, 9.8, 7.1, 1.5, 0.2, 25.3, 16.6, 28.8, 0.4)
c(70.7, 54.5, 245.3, 9.8, 7.1, 1.5, 0.2, 25.3, 16.6, 28.8, 0.4) / 460.2 * 100
252.5 - 203.0
245.3 - 203.0
dat <- st_read(paste0(proc_dir, "data/processed/shapefiles/dstrct_ttls_2014/"))
dat <- st_read(paste0(proc_dir, "shapefiles/dstrct_ttls_2014/"))
dat2014 <- st_read(paste0(proc_dir, "shapefiles/dstrct_ttls_2014/"))
dat2014_df <- st_geometry(dat2014)
dat2014_df
dat2014_df <- st_geometry(dat2014, NULL)
dat2014_df
dat2014 <- st_read(paste0(proc_dir, "shapefiles/dstrct_ttls_2014/"))
dat2014_df <- st_geometry(dat2014, NULL)
dat2014_df
dat2014 <- st_read(paste0(proc_dir, "shapefiles/dstrct_ttls_2014/"))
dat2014_df <- dat2014
st_geometry(dat2014_df) <- NULL
dat2014_df
dat2014_df %>%
mutate(ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total)
dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), NA, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total)
dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total)
dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(ttl_loss)
dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(-ttl_loss)
dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(-ttl_loss) %>%
summarize(ttl = sum(ttl_loss))
194224.6 * 0.25
dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(-ttl_loss)[1:10, ] %>%
summarize(ttl = sum(ttl_loss))
dat <- dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(-ttl_loss)
dat[1:10, ]
sum(dat[1:10, ]$ttl_loss)
81488.02 / 194223.6
sum(dat[1:10, ]$ttl_loss)
dat
dat[1:10, ]
sum(dat[1:20, ]$ttl_loss)
sum(dat[1:20, ]$ttl_loss) / 194223.6
dat <- dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(-ttl_loss) %>%
mutate(n = row_number())
dat
dat <- dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(-ttl_loss) %>%
rowwise() %>%
mutate(n = row_number(),
ttl_sum = sum(1: row_number()))
dat
dat <- dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(-ttl_loss) %>%
rowwise() %>%
mutate(ttl_sum = sum(1: row_number()))
dat
dat <- dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(-ttl_loss) %>%
rowwise() %>%
mutate(n = row_number(),
ttl_sum = sum(row_number < n))
ttl_sum = ifelse(n == 1, ttl_loss, ttl_loss + ttl_sum)
dat <- dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(-ttl_loss) %>%
mutate(ttl_sum = cumsum(ttl_loss))
dat
plot(dat$ttl_loss, dat$ttl_sum)
plot(dat$ttl_sum, dat$ttl_loss)
plot(dat$ttl_loss, dat$ttl_sum)
dat <- dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(-ttl_loss) %>%
mutate(ttl_sum = cumsum(ttl_loss),
percent = ttl_loss / ttl_sum)
dat
dat <- dat2014_df %>%
mutate(mangrov = ifelse(is.na(mangrov), 0, mangrov),
ttl_loss = total - mangrov,
perc_loss = 100 * (total - mangrov) / total) %>%
arrange(-ttl_loss) %>%
mutate(ttl_sum = cumsum(ttl_loss),
percent = ttl_sum / 194223.6)
plot(dat$ttl_sum, dat$percent)
plot(dat$percent)
plot(dat$ttl_sum)
nrow(dat)
sum(dat[0:49, ]$ttl_loss)
sum(dat[0:49, ]$ttl_loss)
sum(dat[0:49, ]$ttl_loss) / 194223.6
sum(dat[1:20, ]$ttl_loss) / 194223.6
dat
