theme(legend.position = "bottom",
strip.background = element_blank(),
strip.text = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
plot.title = element_text(size = 12),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
wo_leg <- grid.arrange(flora, verts, inverts,
nrow = 3,
left = textGrob("Frequency", rot = 90, vjust = 1, gp = gpar(fontfamily = "serif", fontsize = 12)),
bottom = textGrob("Deviation in Biodiversity Recovery", gp = gpar(fontfamily = "serif", fontsize = 12)))
library(ggthemes)
library(ggpubr)
library(gtable)
library(grid)
library(gridExtra)
library(sf)
library(tidyverse)
indir <- "~/Dropbox/manuscripts/RestorationMetaAnalysis/jacob/data/shp/"
fa <- read_sf(paste0(indir, "fa_pts_distribution.shp")) %>% rename(fa = first) %>% st_set_geometry(NULL)
fr <- read_sf(paste0(indir, "fr_pts_distribution.shp")) %>% rename(fr = first) %>% st_set_geometry(NULL)
ia <- read_sf(paste0(indir, "ia_pts_distribution.shp")) %>% rename(ia = first) %>% st_set_geometry(NULL)
ir <- read_sf(paste0(indir, "ir_pts_distribution.shp")) %>% rename(ir = first) %>% st_set_geometry(NULL)
va <- read_sf(paste0(indir, "va_pts_distribution.shp")) %>% rename(va = first) %>% st_set_geometry(NULL)
vr <- read_sf(paste0(indir, "vr_pts_distribution.shp")) %>% rename(vr = first) %>% st_set_geometry(NULL)
dist_dat <- bind_cols(fa, fr, ia, ir, va, vr) %>%
gather(key = "var", value = "estimate") %>%
mutate(var = factor(var))
levels(dist_dat$var) <- c(
"Flora Abundance",
"Flora Richness",
"Invertebrate Abundance",
"Invertebrate Richness",
"Vertebrate Abundance",
"Vertebrate Richness"
)
dist_dat2 <- dist_dat %>%
separate(var, into = c("taxa", "metric")) %>%
mutate(metric_alpha = ifelse(metric == "Abundance", 0.2, 0.1),
metric = ifelse(metric == "Abundance", "Species Abundance", "Species Richness")) %>%
group_by(taxa, metric) %>%
mutate(avg_est = mean(estimate),
med_est = median(estimate))
dat_text <- data.frame(
label = c("A"),
metric = c("Abundance")
)
legPlot <- dist_dat2 %>%
ggplot() +
geom_histogram(aes(estimate, col = taxa), fill = "white", alpha = 1) +
scale_color_manual(values = c("#009E73", "#D55E00", "#0072B2"),
breaks = c("Flora", "Vertebrate", "Invertebrate"),
labels = c("Plants", "Vertebrates", "Invertebrates")) +
theme_bw() +
theme(legend.title = element_blank(),
legend.position = "bottom",
legend.text = element_text(family = "serif", size = 10))
leg <- get_legend(legPlot)
flora_text <- dist_dat2 %>%
select(taxa, metric, med_est) %>%
distinct() %>%
mutate(metric = factor(metric, levels = c("Abundance", "Richness")),
x =  med_est + 0.6, y = 2000,
lab = round(med_est, 2))
flora <- dist_dat2 %>%
filter(taxa == "Flora") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), fill = NA, col = "#009E73", binwidth = 0.33, boundary = 0, closed = "left") +
scale_x_continuous(breaks=seq(0, 3, 1), limits = c(0, 3.5)) +
geom_vline(aes(xintercept = med_est), col = "#009E73", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Flora"),
aes(x = x + 0.2, y = 1800, label = lab), family = "serif") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
theme(legend.position = "none",
strip.background = element_blank(),
strip.text = element_text(family = "serif", size = 12),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
plot.title = element_text(size = 10),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
verts <- dist_dat2 %>%
filter(taxa == "Vertebrate") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), col="#D55E00", fill = NA, binwidth = 0.33, boundary = 0, closed = "left") +
#scale_y_continuous(limits = c(0, 1000)) +
scale_x_continuous(limits = c(0, 3.5)) +
#geom_vline(aes(xintercept = avg_est), col = "orange", linetype = "solid") +
geom_vline(aes(xintercept = med_est), col = "#D55E00", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Vertebrate"),
aes(x = x + 0.1, y = 2500, label = lab), family = "serif") +
#ggtitle("Vertebrates") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
theme(legend.position = "none",
strip.background = element_blank(),
strip.text = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
plot.title = element_text(size = 10),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
inverts <- dist_dat2 %>%
filter(taxa == "Invertebrate") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), fill = "NA", col= "#0072B2", binwidth = 0.33, boundary = 0, closed = "left") +
scale_x_continuous(limits = c(0, 3.5)) +
geom_vline(aes(xintercept = med_est), col = "#0072B2", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Invertebrate"),
aes(x = x + 0.1, y = 3500, label = lab), family = "serif") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
#annotation_custom(grob = leg, xmin = 1.5, xmax=3, ymin = 500, ymax = 2500) +
theme(legend.position = "bottom",
strip.background = element_blank(),
strip.text = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
plot.title = element_text(size = 12),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
wo_leg <- grid.arrange(flora, verts, inverts,
nrow = 3,
left = textGrob("Frequency", rot = 90, vjust = 1, gp = gpar(fontfamily = "serif", fontsize = 12)),
bottom = textGrob("Deviation in Biodiversity Recovery", gp = gpar(fontfamily = "serif", fontsize = 12)))
library(ggthemes)
library(ggpubr)
library(gtable)
library(grid)
library(gridExtra)
library(sf)
library(tidyverse)
indir <- "~/Dropbox/manuscripts/RestorationMetaAnalysis/jacob/data/shp/"
fa <- read_sf(paste0(indir, "fa_pts_distribution.shp")) %>% rename(fa = first) %>% st_set_geometry(NULL)
fr <- read_sf(paste0(indir, "fr_pts_distribution.shp")) %>% rename(fr = first) %>% st_set_geometry(NULL)
ia <- read_sf(paste0(indir, "ia_pts_distribution.shp")) %>% rename(ia = first) %>% st_set_geometry(NULL)
ir <- read_sf(paste0(indir, "ir_pts_distribution.shp")) %>% rename(ir = first) %>% st_set_geometry(NULL)
va <- read_sf(paste0(indir, "va_pts_distribution.shp")) %>% rename(va = first) %>% st_set_geometry(NULL)
vr <- read_sf(paste0(indir, "vr_pts_distribution.shp")) %>% rename(vr = first) %>% st_set_geometry(NULL)
dist_dat <- bind_cols(fa, fr, ia, ir, va, vr) %>%
gather(key = "var", value = "estimate") %>%
mutate(var = factor(var))
levels(dist_dat$var) <- c(
"Flora Abundance",
"Flora Richness",
"Invertebrate Abundance",
"Invertebrate Richness",
"Vertebrate Abundance",
"Vertebrate Richness"
)
dist_dat2 <- dist_dat %>%
separate(var, into = c("taxa", "metric")) %>%
mutate(metric_alpha = ifelse(metric == "Abundance", 0.2, 0.1),
metric = ifelse(metric == "Abundance", "Species Abundance", "Species Richness")) %>%
group_by(taxa, metric) %>%
mutate(avg_est = mean(estimate),
med_est = median(estimate))
dat_text <- data.frame(
label = c("A"),
metric = c("Abundance")
)
legPlot <- dist_dat2 %>%
ggplot() +
geom_histogram(aes(estimate, col = taxa), fill = "white", alpha = 1) +
scale_color_manual(values = c("#009E73", "#D55E00", "#0072B2"),
breaks = c("Flora", "Vertebrate", "Invertebrate"),
labels = c("Plants", "Vertebrates", "Invertebrates")) +
theme_bw() +
theme(legend.title = element_blank(),
legend.position = "bottom",
legend.text = element_text(family = "serif", size = 10))
leg <- get_legend(legPlot)
flora_text <- dist_dat2 %>%
select(taxa, metric, med_est) %>%
distinct() %>%
mutate(metric = factor(metric, levels = c("Species Abundance", "Species Richness")),
x =  med_est + 0.6, y = 2000,
lab = round(med_est, 2))
flora <- dist_dat2 %>%
filter(taxa == "Flora") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), fill = NA, col = "#009E73", binwidth = 0.33, boundary = 0, closed = "left") +
scale_x_continuous(breaks=seq(0, 3, 1), limits = c(0, 3.5)) +
geom_vline(aes(xintercept = med_est), col = "#009E73", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Flora"),
aes(x = x + 0.2, y = 1800, label = lab), family = "serif") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
theme(legend.position = "none",
strip.background = element_blank(),
strip.text = element_text(family = "serif", size = 12),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
plot.title = element_text(size = 10),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
verts <- dist_dat2 %>%
filter(taxa == "Vertebrate") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), col="#D55E00", fill = NA, binwidth = 0.33, boundary = 0, closed = "left") +
#scale_y_continuous(limits = c(0, 1000)) +
scale_x_continuous(limits = c(0, 3.5)) +
#geom_vline(aes(xintercept = avg_est), col = "orange", linetype = "solid") +
geom_vline(aes(xintercept = med_est), col = "#D55E00", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Vertebrate"),
aes(x = x + 0.1, y = 2500, label = lab), family = "serif") +
#ggtitle("Vertebrates") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
theme(legend.position = "none",
strip.background = element_blank(),
strip.text = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
plot.title = element_text(size = 10),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
inverts <- dist_dat2 %>%
filter(taxa == "Invertebrate") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), fill = "NA", col= "#0072B2", binwidth = 0.33, boundary = 0, closed = "left") +
scale_x_continuous(limits = c(0, 3.5)) +
geom_vline(aes(xintercept = med_est), col = "#0072B2", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Invertebrate"),
aes(x = x + 0.1, y = 3500, label = lab), family = "serif") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
#annotation_custom(grob = leg, xmin = 1.5, xmax=3, ymin = 500, ymax = 2500) +
theme(legend.position = "bottom",
strip.background = element_blank(),
strip.text = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
plot.title = element_text(size = 12),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
wo_leg <- grid.arrange(flora, verts, inverts,
nrow = 3,
left = textGrob("Frequency", rot = 90, vjust = 1, gp = gpar(fontfamily = "serif", fontsize = 12)),
bottom = textGrob("Deviation in Biodiversity Recovery", gp = gpar(fontfamily = "serif", fontsize = 12)))
w_leg <- grid.arrange(wo_leg, leg,
nrow = 2, heights = c(10, 1))
legPlot <- dist_dat2 %>%
ggplot() +
geom_histogram(aes(estimate, col = taxa), fill = "white", alpha = 1) +
scale_color_manual(values = c("#009E73", "#D55E00", "#0072B2"),
breaks = c("Flora", "Vertebrate", "Invertebrate"),
labels = c("Plants", "Vertebrates", "Invertebrates")) +
theme_bw() +
theme(legend.title = element_blank(),
legend.position = "bottom",
legend.text = element_text(family = "serif", size = 10))
leg <- get_legend(legPlot)
flora_text <- dist_dat2 %>%
select(taxa, metric, med_est) %>%
distinct() %>%
mutate(metric = factor(metric, levels = c("Abundance", "Richness")),
x =  med_est + 0.6, y = 2000,
lab = round(med_est, 2))
flora <- dist_dat2 %>%
filter(taxa == "Flora") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), fill = NA, col = "#009E73", binwidth = 0.33, boundary = 0, closed = "left") +
scale_x_continuous(breaks=seq(0, 3, 1), limits = c(0, 3.5)) +
geom_vline(aes(xintercept = med_est), col = "#009E73", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Flora"),
aes(x = x + 0.2, y = 1800, label = lab), family = "serif") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
theme(legend.position = "none",
strip.background = element_blank(),
strip.text = element_text(family = "serif", size = 12),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
plot.title = element_text(size = 10),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
verts <- dist_dat2 %>%
filter(taxa == "Vertebrate") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), col="#D55E00", fill = NA, binwidth = 0.33, boundary = 0, closed = "left") +
#scale_y_continuous(limits = c(0, 1000)) +
scale_x_continuous(limits = c(0, 3.5)) +
#geom_vline(aes(xintercept = avg_est), col = "orange", linetype = "solid") +
geom_vline(aes(xintercept = med_est), col = "#D55E00", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Vertebrate"),
aes(x = x + 0.1, y = 2500, label = lab), family = "serif") +
#ggtitle("Vertebrates") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
theme(legend.position = "none",
strip.background = element_blank(),
strip.text = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
plot.title = element_text(size = 10),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
inverts <- dist_dat2 %>%
filter(taxa == "Invertebrate") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), fill = "NA", col= "#0072B2", binwidth = 0.33, boundary = 0, closed = "left") +
scale_x_continuous(limits = c(0, 3.5)) +
geom_vline(aes(xintercept = med_est), col = "#0072B2", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Invertebrate"),
aes(x = x + 0.1, y = 3500, label = lab), family = "serif") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
#annotation_custom(grob = leg, xmin = 1.5, xmax=3, ymin = 500, ymax = 2500) +
theme(legend.position = "bottom",
strip.background = element_blank(),
strip.text = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
plot.title = element_text(size = 12),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
wo_leg <- grid.arrange(flora, verts, inverts,
nrow = 3,
left = textGrob("Frequency", rot = 90, vjust = 1, gp = gpar(fontfamily = "serif", fontsize = 12)),
bottom = textGrob("Deviation in Biodiversity Recovery", gp = gpar(fontfamily = "serif", fontsize = 12)))
w_leg <- grid.arrange(wo_leg, leg,
nrow = 2, heights = c(10, 1))
dist_dat2
dist_dat
dist_dat2 <- dist_dat %>%
separate(var, into = c("taxa", "metric")) %>%
mutate(metric_alpha = ifelse(metric == "Abundance", 0.2, 0.1)) %>%
group_by(taxa, metric) %>%
mutate(avg_est = mean(estimate),
med_est = median(estimate))
dist_dat2
dat_text <- data.frame(
label = c("A"),
metric = c("Abundance")
)
legPlot <- dist_dat2 %>%
ggplot() +
geom_histogram(aes(estimate, col = taxa), fill = "white", alpha = 1) +
scale_color_manual(values = c("#009E73", "#D55E00", "#0072B2"),
breaks = c("Flora", "Vertebrate", "Invertebrate"),
labels = c("Plants", "Vertebrates", "Invertebrates")) +
theme_bw() +
theme(legend.title = element_blank(),
legend.position = "bottom",
legend.text = element_text(family = "serif", size = 10))
leg <- get_legend(legPlot)
flora_text <- dist_dat2 %>%
select(taxa, metric, med_est) %>%
distinct() %>%
mutate(metric = factor(metric, levels = c("Abundance", "Richness")),
x =  med_est + 0.6, y = 2000,
lab = round(med_est, 2))
flora_text
flora <- dist_dat2 %>%
filter(taxa == "Flora") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), fill = NA, col = "#009E73", binwidth = 0.33, boundary = 0, closed = "left") +
scale_x_continuous(breaks=seq(0, 3, 1), limits = c(0, 3.5)) +
geom_vline(aes(xintercept = med_est), col = "#009E73", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Flora"),
aes(x = x + 0.2, y = 1800, label = lab), family = "serif") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
theme(legend.position = "none",
strip.background = element_blank(),
strip.text = element_text(family = "serif", size = 12),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
plot.title = element_text(size = 10),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
flora
verts <- dist_dat2 %>%
filter(taxa == "Vertebrate") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), col="#D55E00", fill = NA, binwidth = 0.33, boundary = 0, closed = "left") +
#scale_y_continuous(limits = c(0, 1000)) +
scale_x_continuous(limits = c(0, 3.5)) +
#geom_vline(aes(xintercept = avg_est), col = "orange", linetype = "solid") +
geom_vline(aes(xintercept = med_est), col = "#D55E00", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Vertebrate"),
aes(x = x + 0.1, y = 2500, label = lab), family = "serif") +
#ggtitle("Vertebrates") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
theme(legend.position = "none",
strip.background = element_blank(),
strip.text = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
plot.title = element_text(size = 10),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
inverts <- dist_dat2 %>%
filter(taxa == "Invertebrate") %>%
ggplot() +
facet_wrap(. ~ metric, scales = "fixed", ncol = 2) +
geom_histogram(aes(estimate), fill = "NA", col= "#0072B2", binwidth = 0.33, boundary = 0, closed = "left") +
scale_x_continuous(limits = c(0, 3.5)) +
geom_vline(aes(xintercept = med_est), col = "#0072B2", linetype = "dashed") +
geom_text(data = filter(flora_text, taxa == "Invertebrate"),
aes(x = x + 0.1, y = 3500, label = lab), family = "serif") +
ylab("Frequency") +
xlab("Deviation in Biodiversity Recovery") +
theme_bw() +
#annotation_custom(grob = leg, xmin = 1.5, xmax=3, ymin = 500, ymax = 2500) +
theme(legend.position = "bottom",
strip.background = element_blank(),
strip.text = element_blank(),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
plot.title = element_text(size = 12),
panel.grid.minor.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank())
wo_leg <- grid.arrange(flora, verts, inverts,
nrow = 3,
left = textGrob("Frequency", rot = 90, vjust = 1, gp = gpar(fontfamily = "serif", fontsize = 12)),
bottom = textGrob("Deviation in Biodiversity Recovery", gp = gpar(fontfamily = "serif", fontsize = 12)))
w_leg <- grid.arrange(wo_leg, leg,
nrow = 2, heights = c(10, 1))
ggsave("~/Dropbox/manuscripts/RestorationMetaAnalysis/jacob/figs/fig3_draft7.pdf",
w_leg, device = "pdf", width = 4.5, height = 6, units = "in")
ggsave("~/Dropbox/manuscripts/RestorationMetaAnalysis/jacob/figs/fig3_draft7.svg",
w_leg, device = "svg", width = 4.5, height = 6, units = "in")
ggsave("~/Dropbox/manuscripts/RestorationMetaAnalysis/jacob/figs/fig3_draft7.jpg",
w_leg, device = "jpg", width = 4.5, height = 6, units = "in")
print("Begin Step 3. backmodeling of carbon stocks to historical mangrove extent...")
library(e1071)
library(gdalUtils)
library(gdata)
library(ggpubr)
library(ggthemes)
library(gridExtra)
library(raster)
library(rgdal)
library(sf)
library(sp)
library(spsurvey)
library(tidyverse)
raw_dir <- "./data/raw/"
proc_dir <- "./data/processed/"
scratch_dir <- "./data/scratch/"
dstrcts <- read_sf(paste0(proc_dir, "shapefiles/districts_mg/districts_mg.shp"))
soc <- raster(paste0(raw_dir, "rasters/Mangrove_soc_Thailand.tif"))
agb <- raster(paste0(raw_dir, "rasters/Mangrove_agb_Thailand.tif"))
dstrcts$ADM2_ID <- 1:nrow(dstrcts)
dstrcts <- dplyr::select(dstrcts, ADM1_EN, ADM2_EN, ADM2_ID, geometry)
dstrcts_sp <- as(dstrcts, "Spatial")
dstrct_avgs <- data.frame("ADM2_ID" = 1:nrow(dstrcts_sp),
"SOC_AVG" = NA, "SOC_SE" = NA,
"AGB_AVG" = NA, "AGB_SE" = NA)
agb_rmse <- 148.0 * 0.47  # Cross-validation RMSE value reported for SE Asia in Simard et al., 2019 SI File (rather high!)
soc_rmse <- 109.0    # Cross-validation RMSE value reported in Sanderman et al., 2018
